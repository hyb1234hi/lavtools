<h3>Flat Transparent watermark detection and removal</h3>

<p>Attempts to detect and remove semi-transperant watermarks from
the source.  Produces a PGM file of the detected watermark which
is used to remove or reduce the effect.  This is a two pass process,
the documentation is a little sparse.  </p>

<p> The first pass produces a grey image file (PGM format) this is
done by averaging luma of all the frames.  The idea is that the
watermark is consistantly brighter than the surrounding video.
The PGM file may need to be edited (blurred) in places as other
long term artifacts may be visible.  </p>

<p> The second pass modifies the luma of the video reducing the
brightness by the amount in the pgm file.  This is not a linear
reduction.  Trial and error was used to determine the correct
formula to reduce the luma by.  For flat watermarks, this function
is ideal.  </p>

<p> Non flat watermarks cannot be removed by this program.  Colour
watermarks cannot be removed by this program.  Solid watermarks
cannot be removed by this program.  </p>

<h4>EXAMPLE</h4>

<p> Pass 1:  <tt> | yuvwater -d > watermark.pgm </tt></p>

<p> May also use a black frame with the watermark showing, extracted
by other means.</P>

<p> pass 2 <tt>| yuvwater  yuvwater -m 145 -l 72  -u 384  -i
watermark.pgm | </tt> -m specifies the amount to remove, the lower
the number the darker the resulting watermark, good starting values
are 140.  -l specifies the black level for normalisation, good
starting values between 32-80. If the black is too light, increase
this value.  -u specifies the white level, good starting value 384,
if the white is too dark, decrease this value.  </p>

<H4>RESULTS</h4>
<? imageinline("yuvwater/",-1); ?>


<h4>HISTORY</h4>
<ul> <li>26th April 2005. Fixed a bug which incorrectly detected
the end of file, creating more frames in the output.</li> <li>17th
May 2005.  Fixed a bug which incorrectly compared the pgm size and
the video size.</li> </ul>
